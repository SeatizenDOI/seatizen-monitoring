# Export

This tutorial explains how to extract a subset of the **SeatizenAtlas** dataset.

## Extracting a subset of the dataset

![Exporter explanation](/frontend/public/tutorials/exporter/exporter_explication.png)

The **Explorer** page is divided into three main sections:

* the **map**,
* the **Data Configuration** section,
* and the **Model Configuration** section.

### Explanation of the elements:

1. Allows you to draw one or more zones on the map. Only the images located **within these zones** will be exported.
   ‚ö†Ô∏è If no zone is drawn, **all images displayed on the map will be exported**, which may take several minutes.
2. Example of a drawn export area: here, the grouping of four board sessions north of Saint-Leu.
3. This selector lets you choose the **acquisition platforms** to include.
   You can select multiple platforms, each represented by a different color.
   The map will only display data from the selected platforms.
4. You can also **filter by time range**: the map will display only data within the selected period.
5. Selection of the **metadata** to include in the extracted subset.
   To obtain a complete sub-dataset, it is essential to keep:

   * the field `version_doi`, which points to the online location where the session is stored,
   * and the field `relative_file_path`, which indicates the path of the image within the session.

---

Now let‚Äôs move to the **Model Configuration** section.
It‚Äôs not required for data extraction, but here‚Äôs what it does:

6. Lets you choose a **multilabel classification model** (not applicable to drone images).
7. Allows you to select the **classes** to keep for the multilabel model.
8. Lets you choose the **output format**: either raw prediction scores or binary values (presence/absence) after applying a threshold.
9. The **Export** button allows you to download the corresponding CSV file.

---

‚ö†Ô∏è **Disclaimer:**
The predictions displayed in this interface are automatically generated by an artificial intelligence model for informational purposes only.
They may contain inaccuracies. The application publisher accepts no responsibility for their interpretation or use.

---

## Retrieving the images

The export generates a CSV file similar to this one:

```csv
FileName,GPSLatitude,GPSLongitude,version_doi,relative_file_path
20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg,-21.16281806626762,55.2865898413734,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_567.jpeg
20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg,-21.16282476635246,55.28659116164465,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_990.jpeg
20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg,-21.162930832467936,55.28655471331759,https://doi.org/10.5281/zenodo.12760339,20231110_REU-ST-LEU_ASV-1_04/PROCESSED_DATA/FRAMES/20231110_REU-ST-LEU_ASV-1_04_5_1409.jpeg
...
```

There are **two ways** to set up the environment required to download the images from Zenodo:

---

### **1. Using a Python environment**

You can follow the detailed installation guide here:
üëâ [GitHub Repository README](https://github.com/SeatizenDOI/zenodo-tools/blob/master/README.md)

This method involves setting up a local Python environment and then running the `zenodo-download.py` script to start the download.

Run the command:

```bash
python zenodo-download.py -ecf -pcf /path/to/csv/file/provided/by/seatizen/monitoring -po /path/where/you/want/your/frames/folder
```

---

### **2. Using Docker (recommended for simplicity)**

If you prefer to avoid installing dependencies manually, you can use **Docker Desktop**.
Once installed, simply run the following command:

```bash
docker run -it --user 1000 --rm \
  -v ./path/where/you/want/your/frames/folder:/home/seatizen/plancha \
  -v ./path/folder/where/csv/file/provided/by/seatizen/monitoring:/home/seatizen/app/csv_inputs \
  --name zenodo-manager seatizendoi/zenodo-manager:latest bash
```

This command:

* automatically downloads the Docker image `seatizendoi/zenodo-manager:latest`,
* mounts your local folders (`plancha` and `inputs`) inside the container,
* and opens an interactive session ready to run the Zenodo Tools scripts.

Once your environment is ready, run the following command inside the container:

```bash
python zenodo-download.py -ecf -pcf /home/seatizen/app/csv_inputs/seatizen_monitoring.csv -po /home/seatizen/plancha
```

---

You now have:

* the **CSV file** generated by Seatizen Monitoring, which you can import into **QGIS** to visualize the exact position of each image,
* and a **folder** `/path/where/you/want/your/frames/folder/Frames` containing all the downloaded images.

